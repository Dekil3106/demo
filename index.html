<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ch·ªçn Bi·∫øn Th·ªÉ C·ªù Vua</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #111;
      display: grid;
      place-items: center;
      min-height: 100vh;
      padding: 16px;
    }
    .container {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      max-width: 600px;
      width: 100%;
    }
    h1 {
      margin: 0 0 30px 0;
      font-size: 28px;
      font-weight: 700;
      color: #222;
      text-align: center;
    }
    .variants {
      display: grid;
      gap: 16px;
    }
    .variant-card {
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .variant-card:hover {
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }
    .variant-card h2 {
      margin: 0 0 8px 0;
      font-size: 20px;
      color: #333;
    }
    .variant-card p {
      margin: 0;
      color: #666;
      font-size: 14px;
    }
    .variant-card.available {
      border-color: #4caf50;
    }
    .variant-card.coming-soon {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .variant-card.coming-soon:hover {
      transform: none;
      border-color: #e0e0e0;
      box-shadow: none;
    }
    .auth-container {
      margin-bottom: 40px;
      background: #f7f7fa;
      border-radius: 10px;
      padding: 24px;
      box-shadow: 0 0 0 rgba(0,0,0,0.06);
      width: 100%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .auth-tabs {
      display: flex;
      gap: 1px;
      margin-bottom: 14px;
    }
    .auth-tab {
      flex: 1;
      padding: 8px 0;
      cursor: pointer;
      background: #edeefd;
      border: none;
      font-weight: 600;
      border-radius: 8px 8px 0 0;
      color: #6070b0;
    }
    .auth-tab.active {
      background: #667eea;
      color: #fff;
    }
    .auth-form label {
      display: block;
      margin-bottom: 4px;
      font-size: 14px;
      color: #474747;
    }
    .auth-form input[type="email"],
    .auth-form input[type="password"] {
      width: 100%;
      padding: 8px 8px;
      margin-bottom: 10px;
      border: 1.5px solid #cfd7ef;
      border-radius: 6px;
      font-size: 15px;
    }
    .auth-form button[type="submit"] {
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: #fff;
      font-weight: 700;
      border: none;
      border-radius: 6px;
      padding: 8px 0;
      font-size: 15px;
      cursor: pointer;
      margin-top: 6px;
    }
    .auth-message {
      font-size: 14px;
      color: #666;
      margin-top: 6px;
      padding-bottom: 2px;
      min-height: 18px;
    }
    .auth-form {
      display: none;
    }
    .auth-form.active {
      display: block;
    }
    .auth-status {
      margin-bottom: 6px;
      font-size: 14px;
      color: #2b7a3c;
      text-align: center;
    }
    .auth-signout-btn {
      background: #e37474;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 15px;
      padding: 7px 0;
      width: 100%;
      margin-top: 8px;
      cursor: pointer;
      font-weight: 700;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- Auth Section -->
    <div class="auth-container" id="auth-container">
      <div class="auth-tabs">
        <button class="auth-tab active" id="tab-login" type="button">ƒêƒÉng nh·∫≠p</button>
        <button class="auth-tab" id="tab-register" type="button">ƒêƒÉng k√Ω</button>
      </div>

      <form id="login-form" class="auth-form active" autocomplete="on">
        <label for="login-email">Email</label>
        <input type="email" id="login-email" required placeholder="example@gmail.com" autocomplete="email">
        <label for="login-password">M·∫≠t kh·∫©u</label>
        <input type="password" id="login-password" required placeholder="Nh·∫≠p m·∫≠t kh·∫©u" autocomplete="current-password">
        <button type="submit">ƒêƒÉng nh·∫≠p</button>
        <div class="auth-message" id="login-message"></div>
      </form>

      <form id="register-form" class="auth-form" autocomplete="on">
        <label for="register-email">Email</label>
        <input type="email" id="register-email" required placeholder="example@gmail.com" autocomplete="email">
        <label for="register-password">M·∫≠t kh·∫©u</label>
        <input type="password" id="register-password" required placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" minlength="6" autocomplete="new-password">
        <button type="submit">ƒêƒÉng k√Ω</button>
        <div class="auth-message" id="register-message"></div>
      </form>

      <div id="auth-status" class="auth-status" style="display: none;"></div>
      <button class="auth-signout-btn" id="signout-btn" style="display: none;">ƒêƒÉng xu·∫•t</button>
    </div>
    <!-- End Auth Section -->

    <h1>üéÆ Ch·ªçn Bi·∫øn Th·ªÉ C·ªù Vua</h1>
    <div class="variants">
      <a href="variants/classic.html" class="variant-card available">
        <h2>‚ôî C·ªù Vua C·ªï ƒêi·ªÉn</h2>
        <p>C·ªù vua truy·ªÅn th·ªëng v·ªõi nh·∫≠p th√†nh v√† lu·∫≠t ch∆°i chu·∫©n</p>
      </a>
      <a href="variants/elemental.html" class="variant-card available">
        <h2>üå™Ô∏è C·ªù Vua Nguy√™n T·ªë</h2>
        <p>M·ªói qu√¢n c·ªù mang m·ªôt nguy√™n t·ªë: t·∫°o hi·ªáu ·ª©ng ƒë·∫∑c bi·ªát theo t·ª´ng nguy√™n t·ªë khi t·∫•n c√¥ng ho·∫∑c ph√≤ng th·ªß</p>
      </a>
    </div>
  </div>

  <script type="module">
    // Import firebase modules
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";

    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyA1Za6Nl_O2EPFmsRrr6fgyR8bcmtdBGQE",
      authDomain: "first-web-24e99.firebaseapp.com",
      projectId: "first-web-24e99",
      storageBucket: "first-web-24e99.firebasestorage.app",
      messagingSenderId: "1091910495572",
      appId: "1:1091910495572:web:a698678d910c41b7732cc1",
      measurementId: "G-H18EBEZKF0"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // Tab switch logic
    const tabLogin = document.getElementById('tab-login');
    const tabRegister = document.getElementById('tab-register');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const loginMessage = document.getElementById('login-message');
    const registerMessage = document.getElementById('register-message');
    const authStatus = document.getElementById('auth-status');
    const signoutBtn = document.getElementById('signout-btn');
    const authContainer = document.getElementById('auth-container');

    tabLogin.onclick = function() {
      tabLogin.classList.add('active');
      tabRegister.classList.remove('active');
      loginForm.classList.add('active');
      registerForm.classList.remove('active');
      loginMessage.textContent = '';
      registerMessage.textContent = '';
    };
    tabRegister.onclick = function() {
      tabLogin.classList.remove('active');
      tabRegister.classList.add('active');
      loginForm.classList.remove('active');
      registerForm.classList.add('active');
      loginMessage.textContent = '';
      registerMessage.textContent = '';
    };

    // Register
    registerForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      const email = document.getElementById('register-email').value.trim();
      const password = document.getElementById('register-password').value;
      registerMessage.textContent = '';
      try {
        await createUserWithEmailAndPassword(auth, email, password);
        registerMessage.textContent = 'ƒêƒÉng k√Ω th√†nh c√¥ng! B·∫°n ƒë√£ c√≥ th·ªÉ ƒëƒÉng nh·∫≠p.';
        registerMessage.style.color = "green";
      } catch (err) {
        registerMessage.textContent = err.message.replace("Firebase: ", "").replace("auth/", "").replace(/-/g, " ");
        registerMessage.style.color = "red";
      }
    });

    // Login
    loginForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value;
      loginMessage.textContent = '';
      try {
        await signInWithEmailAndPassword(auth, email, password);
        loginMessage.textContent = 'ƒêƒÉng nh·∫≠p th√†nh c√¥ng!';
        loginMessage.style.color = "green";
      } catch (err) {
        loginMessage.textContent = "ƒêƒÉng nh·∫≠p th·∫•t b·∫°i: " + err.message.replace("Firebase: ", "").replace("auth/", "").replace(/-/g, " ");
        loginMessage.style.color = "red";
      }
    });

    // Auth State
    onAuthStateChanged(auth, user => {
      if (user) {
        // Logged in
        authStatus.textContent = `ƒêang ƒëƒÉng nh·∫≠p: ${user.email}`;
        authStatus.style.display = "block";
        loginForm.style.display = "none";
        registerForm.style.display = "none";
        tabLogin.style.display = "none";
        tabRegister.style.display = "none";
        signoutBtn.style.display = "block";
        loginMessage.textContent = "";
        registerMessage.textContent = "";
      } else {
        // Logged out
        authStatus.textContent = "";
        authStatus.style.display = "none";
        loginForm.style.display = tabLogin.classList.contains("active") ? "block" : "none";
        registerForm.style.display = tabRegister.classList.contains("active") ? "block" : "none";
        tabLogin.style.display = "inline-block";
        tabRegister.style.display = "inline-block";
        signoutBtn.style.display = "none";
      }
    });

    // Sign out
    signoutBtn.addEventListener("click", async function() {
      await signOut(auth);
      tabLogin.classList.add('active');
      tabRegister.classList.remove('active');
      loginForm.classList.add('active');
      registerForm.classList.remove('active');
    });

  </script>
</body>
</html>
